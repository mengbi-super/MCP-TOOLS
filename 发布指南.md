# MCP æ—¥å¿—åˆ†æå·¥å…· - å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•å°† MCP æ—¥å¿—åˆ†æå·¥å…·å‘å¸ƒç»™å…¶ä»–äººä½¿ç”¨ã€‚

---

## ğŸ“¦ å‘å¸ƒæ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆä¸€ï¼šæ‰“åŒ…ä¸º Python åŒ…ï¼ˆæ¨èï¼‰â­

**ä¼˜ç‚¹ï¼š**
- âœ… ç”¨æˆ·åªéœ€ `pip install` å³å¯ä½¿ç”¨
- âœ… è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»
- âœ… å¯ä»¥å‘å¸ƒåˆ° PyPIï¼ˆå…¬å¼€ï¼‰æˆ–ç§æœ‰ PyPI æœåŠ¡å™¨ï¼ˆç§æœï¼‰
- âœ… ç‰ˆæœ¬ç®¡ç†æ–¹ä¾¿
- âœ… æ”¯æŒå¤šå¹³å°ï¼ˆWindows/Linux/Macï¼‰

**ç¼ºç‚¹ï¼š**
- âš ï¸ éœ€è¦é…ç½®æ‰“åŒ…æ–‡ä»¶ï¼ˆå·²å®Œæˆï¼‰
- âš ï¸ éœ€è¦æ„å»ºå’Œä¸Šä¼ æ­¥éª¤

### æ–¹æ¡ˆäºŒï¼šGit ä»“åº“ç›´æ¥ä½¿ç”¨

**ä¼˜ç‚¹ï¼š**
- âœ… ç®€å•ç›´æ¥
- âœ… ä¾¿äºåä½œå¼€å‘

**ç¼ºç‚¹ï¼š**
- âŒ ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å®‰è£…ä¾èµ–
- âŒ éœ€è¦å…‹éš†æ•´ä¸ªä»“åº“
- âŒ ç‰ˆæœ¬ç®¡ç†ä¸å¤Ÿè§„èŒƒ

### æ–¹æ¡ˆä¸‰ï¼šDocker å®¹å™¨åŒ–

**ä¼˜ç‚¹ï¼š**
- âœ… ç¯å¢ƒä¸€è‡´æ€§å¥½
- âœ… éƒ¨ç½²æ–¹ä¾¿

**ç¼ºç‚¹ï¼š**
- âŒ éœ€è¦ Docker ç¯å¢ƒ
- âŒ å¯¹äº MCP å·¥å…·æ¥è¯´å¯èƒ½è¿‡äºå¤æ‚

---

## ğŸš€ æ¨èæ–¹æ¡ˆï¼šæ‰“åŒ…ä¸º Python åŒ…

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å‘å¸ƒæ–‡ä»¶

å·²åˆ›å»ºçš„æ–‡ä»¶ï¼š
- âœ… `pyproject.toml` - ç°ä»£ Python æ‰“åŒ…é…ç½®
- âœ… `setup.py` - å…¼å®¹æ€§æ‰“åŒ…é…ç½®
- âœ… `requirements.txt` - ä¾èµ–åˆ—è¡¨
- âœ… `src/tools/__init__.py` - åŒ…åˆå§‹åŒ–æ–‡ä»¶

### ç¬¬äºŒæ­¥ï¼šæ„å»ºåŒ…

```bash
# å®‰è£…æ„å»ºå·¥å…·
pip install build twine

# æ„å»ºåˆ†å‘åŒ…ï¼ˆä¼šç”Ÿæˆ dist/ ç›®å½•ï¼‰
python -m build

# æˆ–è€…ä½¿ç”¨ setuptools
python setup.py sdist bdist_wheel
```

æ„å»ºå®Œæˆåï¼Œä¼šåœ¨ `dist/` ç›®å½•ä¸‹ç”Ÿæˆï¼š
- `mcp-logback-analyzer-1.0.0.tar.gz` - æºç åˆ†å‘åŒ…
- `mcp_log_analyzer-1.0.0-py3-none-any.whl` - é¢„ç¼–è¯‘åˆ†å‘åŒ…

### ç¬¬ä¸‰æ­¥ï¼šå‘å¸ƒåˆ° PyPIï¼ˆå…¬å¼€ï¼‰

#### 3.1 æ³¨å†Œ PyPI è´¦å·

1. è®¿é—® https://pypi.org/account/register/
2. æ³¨å†Œè´¦å·å¹¶éªŒè¯é‚®ç®±

#### 3.2 é…ç½® API Tokenï¼ˆæ¨èï¼‰

1. ç™»å½• PyPI
2. è¿›å…¥ Account settings â†’ API tokens
3. åˆ›å»ºæ–°çš„ API token
4. é…ç½®åˆ°æœ¬åœ°ï¼š

```bash
# åˆ›å»º ~/.pypirc æ–‡ä»¶ï¼ˆLinux/Macï¼‰æˆ– %USERPROFILE%\.pypircï¼ˆWindowsï¼‰
[pypi]
username = __token__
password = pypi-ä½ çš„token
```

#### 3.3 ä¸Šä¼ åˆ° PyPI

```bash
# å…ˆä¸Šä¼ åˆ°æµ‹è¯• PyPI éªŒè¯
python -m twine upload --repository testpypi dist/*

# æµ‹è¯•å®‰è£…
pip install -i https://test.pypi.org/simple/ mcp-logback-analyzer

# ç¡®è®¤æ— è¯¯åï¼Œä¸Šä¼ åˆ°æ­£å¼ PyPI
python -m twine upload dist/*
```

### ç¬¬å››æ­¥ï¼šå‘å¸ƒåˆ°ç§æœ‰ PyPI æœåŠ¡å™¨ï¼ˆç§æœï¼‰

#### 4.1 æ­å»ºç§æœ‰ PyPI æœåŠ¡å™¨

**é€‰é¡¹ Aï¼šä½¿ç”¨ pypiserverï¼ˆç®€å•ï¼‰**

```bash
# å®‰è£…
pip install pypiserver passlib

# å¯åŠ¨æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
pypi-server run -p 8080 ./packages

# ä¸Šä¼ åŒ…
python -m twine upload --repository-url http://your-server:8080 dist/*
```

**é€‰é¡¹ Bï¼šä½¿ç”¨ devpiï¼ˆåŠŸèƒ½æ›´å…¨ï¼‰**

```bash
# å®‰è£…
pip install devpi-server devpi-client

# åˆå§‹åŒ–æœåŠ¡å™¨
devpi-server --start

# åˆ›å»ºç”¨æˆ·å’Œç´¢å¼•
devpi use http://localhost:3141
devpi user -c yourname password=yourpass
devpi login yourname --password=yourpass
devpi index -c dev bases=root/pypi

# ä¸Šä¼ åŒ…
devpi use http://localhost:3141/yourname/dev
devpi upload dist/*
```

#### 4.2 é…ç½®å®¢æˆ·ç«¯ä½¿ç”¨ç§æœ

ç”¨æˆ·éœ€è¦é…ç½® pip ä½¿ç”¨ä½ çš„ç§æœï¼š

```bash
# æ–¹å¼1ï¼šä¸´æ—¶ä½¿ç”¨
pip install -i http://your-server:8080/simple/ mcp-logback-analyzer

# æ–¹å¼2ï¼šæ°¸ä¹…é…ç½®ï¼ˆåˆ›å»ºæˆ–ç¼–è¾‘ pip.confï¼‰
# Windows: %APPDATA%\pip\pip.ini
# Linux/Mac: ~/.pip/pip.conf

[global]
index-url = http://your-server:8080/simple/
trusted-host = your-server
```

---

## ğŸ“‹ ç”¨æˆ·å®‰è£…å’Œä½¿ç”¨

### æ–¹å¼ä¸€ï¼šä» PyPI å®‰è£…ï¼ˆå…¬å¼€ï¼‰

```bash
# å®‰è£…
pip install mcp-logback-analyzer

# éªŒè¯å®‰è£…
python -c "from tools.log_analyzer_tool import LogAnalyzer; print('å®‰è£…æˆåŠŸ')"
```

### æ–¹å¼äºŒï¼šä»ç§æœ‰ PyPI å®‰è£…

```bash
# é…ç½®ç§æœåœ°å€åå®‰è£…
pip install mcp-logback-analyzer

# æˆ–ä¸´æ—¶æŒ‡å®š
pip install -i http://your-server:8080/simple/ mcp-logback-analyzer
```

### æ–¹å¼ä¸‰ï¼šä»æœ¬åœ°æ–‡ä»¶å®‰è£…

```bash
# ä»æ„å»ºçš„åŒ…æ–‡ä»¶å®‰è£…
pip install dist/mcp_log_analyzer-1.0.0-py3-none-any.whl

# æˆ–ä»æºç å®‰è£…
pip install dist/mcp-logback-analyzer-1.0.0.tar.gz
```

### æ–¹å¼å››ï¼šä» Git ä»“åº“å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/mcp-logback-analyzer.git
cd mcp-logback-analyzer

# å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼Œå¯ç¼–è¾‘ï¼‰
pip install -e .

# æˆ–ç›´æ¥å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

---

## âš™ï¸ é…ç½® Cursor MCP

å®‰è£…å®Œæˆåï¼Œç”¨æˆ·éœ€è¦åœ¨ Cursor ä¸­é…ç½® MCP æœåŠ¡å™¨ã€‚

### 1. æ‰¾åˆ° Python è§£é‡Šå™¨è·¯å¾„

```bash
# Windows
where python
# æˆ–
where py

# Linux/Mac
which python3
```

### 2. æ‰¾åˆ°å®‰è£…çš„åŒ…è·¯å¾„

```bash
# æŸ¥çœ‹åŒ…å®‰è£…ä½ç½®
python -c "import tools; import os; print(os.path.dirname(tools.__file__))"

# æˆ–ç›´æ¥ä½¿ç”¨æ¨¡å—æ–¹å¼
python -m tools.log_analyzer_tool
```

### 3. é…ç½® cursor-mcp-config.json

åˆ›å»ºæˆ–ç¼–è¾‘ Cursor çš„ MCP é…ç½®æ–‡ä»¶ï¼š

**Windows:** `%APPDATA%\Cursor\User\globalStorage\saoudrizwan.claude-dev\settings\cline_mcp_settings.json`

**Mac:** `~/Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`

**Linux:** `~/.config/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`

```json
{
  "mcpServers": {
    "log-analyzer": {
      "command": "python",
      "args": [
        "-m",
        "tools.log_analyzer_tool"
      ],
      "cwd": "${workspaceFolder}",
      "env": {
        "LOGBACK_CONFIG_PATH": "${workspaceFolder}/src/resource/logback-spring.xml",
        "SPRING_APPLICATION_NAME": "your-app-name",
        "APP_PACKAGE": "com.example.yourpackage"
      },
      "description": "æ—¥å¿—åˆ†æå·¥å…· - æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½® logback å’Œæ—¥å¿—æ–‡ä»¶è·¯å¾„"
    }
  }
}
```

**æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š**

```json
{
  "mcpServers": {
    "log-analyzer": {
      "command": "python",
      "args": [
        "C:\\Python312\\Scripts\\mcp-logback-analyzer.exe"
      ],
      "cwd": "${workspaceFolder}",
      "env": {
        "LOGBACK_CONFIG_PATH": "${workspaceFolder}/src/resource/logback-spring.xml",
        "SPRING_APPLICATION_NAME": "your-app-name"
      }
    }
  }
}
```

---

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æµç¨‹

### 1. æ›´æ–°ç‰ˆæœ¬å·

ç¼–è¾‘ `pyproject.toml` å’Œ `setup.py`ï¼š

```toml
# pyproject.toml
version = "1.0.1"  # æ›´æ–°ç‰ˆæœ¬å·
```

```python
# setup.py
version="1.0.1",  # æ›´æ–°ç‰ˆæœ¬å·
```

### 2. æ›´æ–° CHANGELOGï¼ˆå¯é€‰ï¼‰

åˆ›å»ºæˆ–æ›´æ–° `CHANGELOG.md`ï¼š

```markdown
## [1.0.1] - 2025-01-XX

### æ–°å¢
- æ–°å¢åŠŸèƒ½ X

### ä¿®å¤
- ä¿®å¤é—®é¢˜ Y

### æ”¹è¿›
- ä¼˜åŒ–æ€§èƒ½ Z
```

### 3. é‡æ–°æ„å»ºå’Œå‘å¸ƒ

```bash
# æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
rm -rf dist/ build/ *.egg-info

# é‡æ–°æ„å»º
python -m build

# ä¸Šä¼ æ–°ç‰ˆæœ¬
python -m twine upload dist/*
```

### 4. ç”¨æˆ·æ›´æ–°

```bash
# ç”¨æˆ·æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade mcp-logback-analyzer
```

---

## ğŸ“ å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰è¯·ç¡®è®¤ï¼š

- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] æ‰€æœ‰ä¾èµ–å·²æ·»åŠ åˆ° `requirements.txt` å’Œ `pyproject.toml`
- [ ] ä»£ç å·²æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°ï¼ˆ`å®Œæ•´æ–‡æ¡£.md`ï¼‰
- [ ] å·²åˆ›å»º Git tagï¼ˆå¦‚ä½¿ç”¨ Gitï¼‰
- [ ] å·²æ„å»ºåŒ…æ–‡ä»¶ï¼ˆ`python -m build`ï¼‰
- [ ] å·²æµ‹è¯•å®‰è£…ï¼ˆ`pip install dist/xxx.whl`ï¼‰
- [ ] å·²æµ‹è¯•åŠŸèƒ½ï¼ˆåœ¨ Cursor ä¸­æµ‹è¯• MCP å·¥å…·ï¼‰
- [ ] å·²ä¸Šä¼ åˆ° PyPI æˆ–ç§æœ
- [ ] å·²é€šçŸ¥ç”¨æˆ·æ›´æ–°

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q1: ç”¨æˆ·å®‰è£…åæ‰¾ä¸åˆ°æ¨¡å—ï¼Ÿ

**A:** ç¡®ä¿ä½¿ç”¨ `-m` å‚æ•°ä»¥æ¨¡å—æ–¹å¼è¿è¡Œï¼š

```json
"args": ["-m", "tools.log_analyzer_tool"]
```

### Q2: å¦‚ä½•æ”¯æŒå¤šä¸ª Python ç‰ˆæœ¬ï¼Ÿ

**A:** åœ¨ `pyproject.toml` ä¸­æŒ‡å®šï¼š

```toml
requires-python = ">=3.8"
```

æ„å»ºæ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆå…¼å®¹çš„åŒ…ã€‚

### Q3: å¦‚ä½•åŒ…å«èµ„æºæ–‡ä»¶ï¼ˆå¦‚ logback-spring.xmlï¼‰ï¼Ÿ

**A:** å·²åœ¨ `setup.py` ä¸­é…ç½®ï¼š

```python
package_data={
    "resource": ["*.xml"],
},
```

### Q4: ç§æœéœ€è¦è®¤è¯æ€ä¹ˆåŠï¼Ÿ

**A:** é…ç½® pip ä½¿ç”¨ç”¨æˆ·åå¯†ç ï¼š

```bash
pip install --index-url http://user:pass@your-server:8080/simple/ mcp-logback-analyzer
```

æˆ–åœ¨ `pip.conf` ä¸­é…ç½®ï¼š

```ini
[global]
index-url = http://user:pass@your-server:8080/simple/
```

---

## ğŸ“š ç›¸å…³èµ„æº

- [Python æ‰“åŒ…æŒ‡å—](https://packaging.python.org/)
- [PyPI æ–‡æ¡£](https://pypi.org/help/)
- [FastMCP æ–‡æ¡£](https://github.com/jlowin/fastmcp)
- [Cursor MCP æ–‡æ¡£](https://docs.cursor.com/mcp)

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆå¦‚ 1.0.0ï¼‰
2. **æä¾›æ¸…æ™°çš„æ–‡æ¡£**ï¼šç¡®ä¿ç”¨æˆ·çŸ¥é“å¦‚ä½•å®‰è£…å’Œé…ç½®
3. **æä¾›ç¤ºä¾‹é…ç½®**ï¼š`cursor-mcp-config-example.json` å¾ˆæœ‰ç”¨
4. **æµ‹è¯•å®‰è£…æµç¨‹**ï¼šåœ¨å¹²å‡€ç¯å¢ƒä¸­æµ‹è¯•å®‰è£…
5. **ç»´æŠ¤ CHANGELOG**ï¼šè®°å½•æ¯ä¸ªç‰ˆæœ¬çš„å˜æ›´
6. **ä½¿ç”¨ Git tags**ï¼šæ ‡è®°å‘å¸ƒç‰ˆæœ¬
7. **æä¾›å¤šç§å®‰è£…æ–¹å¼**ï¼šæ»¡è¶³ä¸åŒç”¨æˆ·éœ€æ±‚

---

## ğŸ¯ å¿«é€Ÿå‘å¸ƒå‘½ä»¤æ€»ç»“

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆæ‰‹åŠ¨ç¼–è¾‘ pyproject.toml å’Œ setup.pyï¼‰

# 2. æ„å»ºåŒ…
python -m build

# 3. æµ‹è¯•å®‰è£…
pip install dist/mcp_log_analyzer-1.0.0-py3-none-any.whl

# 4. ä¸Šä¼ åˆ° PyPI
python -m twine upload dist/*

# 5. éªŒè¯å®‰è£…ï¼ˆåœ¨å¦ä¸€å°æœºå™¨æˆ–è™šæ‹Ÿç¯å¢ƒï¼‰
pip install mcp-logback-analyzer
```

---

å®Œæˆï¼ç°åœ¨ä½ å¯ä»¥å°†å·¥å…·å‘å¸ƒç»™å…¶ä»–äººä½¿ç”¨äº†ã€‚æ¨èä½¿ç”¨**æ–¹æ¡ˆä¸€ï¼ˆæ‰“åŒ…ä¸º Python åŒ…ï¼‰**ï¼Œè¿™æ˜¯æœ€ä¸“ä¸šå’Œä¾¿æ·çš„æ–¹å¼ã€‚
